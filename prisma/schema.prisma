// Prisma Schema for Supabase
// Documentation: https://pris.ly/d/prisma-schema
//
// After clone or schema change: npx prisma generate
// To sync schema from DB:      npx prisma db pull
// To push schema to DB:         npx prisma db push

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// User Model - Authentication
model User {
  id            String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  password      String?
  phoneNumber   String?   @unique
  role          String    @default("user") // user, vendor, admin
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([email])
  @@index([phoneNumber])
}

// Product Model - Simple e-commerce structure
model Product {
  id          String   @id @default(cuid())
  name        String
  description String?  @db.Text
  price       Float
  image       String?
  category    String
  stockStatus String   @default("in-stock") // in-stock, pre-order, out-of-stock
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([category])
  @@index([stockStatus])
  @@index([createdAt])
}
